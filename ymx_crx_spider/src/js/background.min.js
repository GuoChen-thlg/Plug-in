function SendMessageToContent(message,callback,error){chrome.tabs.query({active:!0,currentWindow:!0},(function(tabs){chrome.tabs.sendMessage(tabs[0].id,message,(function(response){chrome.runtime.lastError?error(chrome.runtime.lastError):callback(response)}))}))}chrome.runtime.onInstalled.addListener((function(){chrome.declarativeContent.onPageChanged.removeRules(void 0,(function(){chrome.declarativeContent.onPageChanged.addRules([{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{urlContains:"amazon"}})],actions:[new chrome.declarativeContent.ShowPageAction]}])}))})),chrome.pageAction.onClicked.addListener((function(tab){SendMessageToContent({type:"OPEN"},data=>{console.log(data)},error=>{console.log(error.message),error.message&&error.message.includes("Could not establish connection. Receiving end does not exist")&&chrome.notifications.create(`${error.message}-${(new Date).getTime()}`,{type:"basic",title:"错误",message:"请刷新页面",iconUrl:"../../img/icon32_wx_logo.png"},notificationId=>{console.log(notificationId)})})}));